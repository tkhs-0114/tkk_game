# GitHub Copilot 指示書

## 基本方針

- **日本語で応答すること**: すべてのドキュメント、コメント、メッセージは日本語で作成してください
- **要求の明確化**: 必要に応じて、ユーザーに質問を行い、要求を明確にしてください
- **作業報告**: 作業後、作業内容とユーザーが次に取れる行動を説明してください
- **段階的な実装**: 作業項目が多い場合は、細かい段階に区切り、ユーザーに確認しながら進めてください
- **コマンド確認**: コマンドの出力が確認できない場合、ユーザーに確認しながら進めてください
- **ファイルパスの指定方法**: ファイルパスを記載する際は必ずワークスペースのルートからの相対パスで記載してください
  - 例：`janken/src/main/java/oit/is/z9999/kaizi/JankenController.java`

### ドキュメント構造

プロジェクトでは以下のドキュメント構造を使用します。

| ファイルパス | 用途 |
|------------|------|
| `docs/reports/investigate/*.md` | 調査レポート。調査フェーズで調査内容を日付や内容でファイル名をつけて保存 |
| `docs/reports/done/done_*.md` | 完了した実装等の作業履歴。実装フェーズで作成 |
| `docs/reports/review/review_*.md` | レビュー結果の履歴。レビューフェーズで作成 |
| `docs/specs.md` | 現状のシステム仕様。システム全体の構成と実装済みの機能を記載。実装フェーズで更新 |
| `docs/tasks.md` | 現在の作業計画。計画フェーズで作成・更新 |

### 注意事項

- 実装フェーズでは計画に記載された範囲を超えないこと
- 各フェーズの目的を明確に理解し、フェーズ外の作業を行わないこと
- ドキュメントは常に最新の状態に保つこと


## 開発ワークフロー

各作業フェーズを以下のように定義します。

### 調査フェーズ

ユーザーから「調査」と指示された場合：

- 調査結果を調査レポートとして `docs/reports/investigate/` ディレクトリに都度記載すること
- ファイル名は調査日時や内容が分かるようにする（例：`YYYY-MM-DD_調査内容.md`）
- 調査内容、発見した事項、推奨事項を明確に記載すること
- 特に指定がない場合，実装方法についての調査にはまずGitHubの igakilab/springboot_samples リポジトリを参照すること
- 必要に応じて参考コード例を含めること
- 参考にしたURLがある場合は、必ず記載すること
- **重要**: このフェーズでは絶対にコードを書いてはいけない

### 計画フェーズ

ユーザーから「計画」と指示された場合：

- ここに記載された内容をまず最初に必ず読み込み，計画の流れをユーザにも提示すること
- `docs/tasks.md` に計画を記載すること
  - `docs/tasks.md` に前回の内容が残っている場合は、読まずに消すこと
- すべてのコードベース及び `docs` を読み込み、要件に関連性のあるファイルパスをすべて記載すること
- タスクは具体的かつ正常に動作することを確認可能で実行可能な最小単位に分割し，優先順位をつけること
- タスクごとに必要な関連ファイルをすべて記載し，動作を確認するために必要な入力や手順，テストコードについての言及も行うこと
- すべてのタスクが正常に完了した後にそのタスクが正常に動作することを確認する方法をDoD(Definition of Done)として記載すること
  - DoDの例：「gradle bootRun でアプリケーションを起動し，ブラウザで localhost:8080/ にアクセスしてuser1/p@ss でログインし，じゃんけんゲームの画面が表示されることを確認する．画面にはじゃんけんの手を選択し，勝負ボタンが表示されている．」
- **重要**: このフェーズでは絶対にコードを書いてはいけない

### 実装フェーズ

ユーザーから「実装」と指示された場合：

- ここに記載された内容をまず最初に読み込み，実装の流れをユーザにも提示すること
- 実装を開始する前にユーザーがmainブランチにいることを確認すること．
- mainブランチにいることが確認出来たら，`git switch`を用いて新規実装のための新しいブランチを作成すること
  - ブランチ名の例：feat/機能名）
- `docs/tasks.md` に記載された内容に基づいて実装を行うこと
  - 記載されている以上の実装を絶対に行わないこと
- 実装完了時には以下を行うこと：
  - `docs/reports/done/done_YYYY-MM-DD_実装内容.md` に完了したタスクと日付，そのタスクが正常に動作することを確認するための手順や入出力情報，開発を行ったgitのブランチ名をdoneレポートとして詳細に記載する
  - `docs/specs.md` を見て、実装内容を最新のシステム仕様にあうよう更新すること

### レビューフェーズ

ユーザーから「レビュー」と指示された場合：

- ここに記載された内容をまず最初に読み込み，レビューの流れをユーザにも提示すること
- 実装が完了したブランチにいることを確認すること
- `docs/specs.md` と `docs/tasks.md` を読み込み，実装後のコードベースについての説明が各mdファイルに網羅的に記述されていることをまず確認すること
- さらにコードベース全体を読み込み，以下の点を確認すること：
  - コーディング規約に従っているか
  - コメントが適切に記載されているか
  - 変数，メソッド，クラスが規約に従っているか
  - 不要なコードが含まれていないか
- レビュー完了時には以下を行うこと：
  - `docs/reports/review/review_YYYY-MM-DD_レビュー確認内容.md` に完了したレビューと日付，レビュー結果をレビューレポートとして詳細に記載すること
- 「レビュー」フェーズではdocs/reports/ への記載以外，コードの修正は絶対に行わないこと


## コーディング規約

- プロジェクトの既存のコーディングスタイルに従うこと
- 適切なコメントを日本語で記述すること
- 変数、メソッド、クラスは以下の規約に従うこと

### 1. 変数・変数名

* キャメルケース (`camelCase`) を使用してください。
例: `userName`, `orderId`
* 短縮形は避けてください。
例: `usrNm` (X) -> `userName` (O)
* 定数には全て大文字のスネークケース (`SNAKE_CASE`) を使用してください。
例: `MAX_RETRIES`, `DEFAULT_TIMEOUT`
* 変数名はその役割が明確にわかるように命名してください。

### 2. メソッド・メソッド名

* 動詞から始め、キャメルケース (`camelCase`) を使用してください。
例: `getUserProfile`, `calculateTotalPrice`
* メソッドが何を行うか明確にわかるように命名してください。
* 引数が多すぎるメソッドは避け、必要に応じてオブジェクトにまとめてください。

### 3. クラス・クラス名

* パスカルケース (`PascalCase`) を使用してください。
例: `UserService`, `ProductRepository`
* クラス名は名詞または名詞句で命名してください。
* 1クラス1責任の原則に従い、クラス名はその責任を反映するようにしてください。
* 1つのファイルに複数のクラスを定義しないでください。

### 4. コメント

* 複雑なロジックや意図が分かりにくい箇所には、JavaDoc形式のコメントを記述してください。
